<!DOCTYPE html>
<HTML>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Customize mouse gestures</title>
<style>
.no_scrollbar::-webkit-scrollbar
{
	display:none;
}
</style>
<link href="css/common.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
var default_map = "";
function getMapData()
{
	var ret = "";
  var func_selects=document.getElementsByTagName("select");
	for (var i = 0; i < func_selects.length; i++)
	{
		if(func_selects[i].value != "No action")
			ret += func_selects[i].name + ":" + func_selects[i].value +",";
	}
	if (ret.length == 0)
		ret = "all_no_action";
	else
		ret = ret.substr(0,ret.length-1); 
	return ret;
}

function onOK()
{
  document.sjReturnValue = getMapData();
  //console.log(document.sjReturnValue);
  window.close();
}

function onCancel()
{
  document.sjReturnValue = "";
  window.close();
}

function onReset()
{
  var keys = default_map.split(",");
	if (keys[keys.length-1] == "") keys.length--;
	var maps_key = new Array();
	var maps_value = new Array();
	for (var i = 0; i < keys.length; i++)
	{
		var gestures = keys[i].split(":");
		maps_key[i] = gestures[0];
		maps_value[i] = gestures[1];
	}
	
	var func_selects=document.getElementsByTagName("select");
	for (var i = 0; i < func_selects.length; i++)
	{
		var index = maps_key.indexOf(func_selects[i].name);
		if (index != -1)
			func_selects[i].value = maps_value[index];
		else
			func_selects[i].value = "No action";
	}
}

function InitDialog(func_list,name_list,map_data,default_gestures)
{
	var actions = func_list.split(",");
	var names = name_list.split(",");
	var keys = map_data.split(",");
	if (keys[keys.length-1] == "") keys.length--;
	var maps_key = new Array();
	var maps_value = new Array();
	default_map = default_gestures;
	for (var i = 0; i < keys.length; i++)
	{
		var gestures = keys[i].split(":");
		maps_key[i] = gestures[0];
		maps_value[i] = gestures[1];
	}
	var func_selects=document.getElementsByTagName("select");
	for (var i = 0; i < func_selects.length; i++)
	{
		var index = maps_key.indexOf(func_selects[i].name);
		var action;
		if (index != -1)
			action = maps_value[index];
		else
			action = "No action";
		var has_action = false;
		for (var j = 0; j < actions.length; j++) 
		{
			func_selects[i].options.add(new Option(names[j],actions[j]));
		}
		
		func_selects[i].options.add(new Option(document.getElementById("no_action").innerText,"No action"));
		func_selects[i].value = action;
	}
}


document.onkeydown = function(e)
{
    if((e.keyCode || e.which) == 13){
        document.getElementById("button_ok").click();
    }
}

</SCRIPT>
</head>
<BODY style="font-size:13px; font-family:Verdana, Geneva, sans-serif">
<div style="width:320px">
Hold right mouse button and draw the following lines to invoke the corresponding mouse gesture.
  <div style="border:1px solid #ccc;height:444px;overflow-x:auto;overflow-y:scroll; margin-top:5px; margin-bottom:5px">
  <table width="300px" border="1">
  <tr>
    <td bordercolor="#666666" >Gesture</td>
	<td width="45%" bordercolor="#666666">Action</td>
  </tr>
  <tr>
    <td width="33%" bordercolor="#666666"><img src="images/mouse_gestures/0.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="0"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/1.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="1"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/2.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select  name="2"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/3.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="3"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/4.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="4"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/5.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="5"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/6.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="6"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/7.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="7"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/02.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select  name="02"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/06.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select  name="06"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/42.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="42"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/46.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="46"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/24.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="24"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/20.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select  name="20"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/64.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="64"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/60.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select  name="60"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/26.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="26"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/62.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select name="62"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/40.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select  name="40"></select></td>
  </tr>
  <tr>
    <td bordercolor="#666666"><img src="images/mouse_gestures/04.png" width="32" height="32" /></td>
    <td bordercolor="#666666"><select  name="04"></select></td>
  </tr>
</table>

  </div>
  <table width="100%" border="0">
    <tr align="center">
    	<td width="33%"><button id="button_reset" onclick = "onReset();" style="min-width:80px">Reset</button></td>
      <td width="33%"><button id="button_ok" onclick = "onOK();" style="min-width:80px">OK</button></td>
      <td width="34%"><button onclick = "onCancel();" style="min-width:80px">Cancel</button></td>
    </tr>
  </table>
  <span id="no_action" hidden>No action</span>
</div>
</BODY>
</HTML>
